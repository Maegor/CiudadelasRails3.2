<%= form_tag form_action('change_cards','change_with_player') do %>


  <% current_user.player.opponents.each do |opponent|  %>

         <div class="image-radio-container">
           <%= radio_button_tag 'opponent[]', opponent.id %>

           <%if   %w(ACTION TURN WAITINGENDROUND).include?(opponent.state)%>
               <div class="select_char" id="<%= #noinspection RubyResolve
                                                opponent.player_character.base_card.name%>_select" >

                 <div class="char_name"><%= #noinspection RubyResolve
                                            opponent.name  %></div>

               </div>

               <% else %>
           <div class="select_char" id="nochar_select">
             <div class="char_name"><%= #noinspection RubyResolve
                                        opponent.name %></div>
           </div>
           <%end%>

</div>


  <%end%>
<div id="submit">
<%= submit_tag  'Cambiar' %>
</div>
<%end%>



<script type="text/javascript">
    var auxi
    $('.image-radio-container').on('click', function(){
        auxi = this;

        if($(this).children('input[type="radio"]').prop('checked')){

        }else{

            $('.image-radio-container input:radio:checked').prop('checked', false).each(function(){
                console.log(this);
                //$(this).removeAttr('checked');
                $(this).parent('.image-radio-container').each(function(){
                    console.log(this);
                    $(this).css({
                            border: '0px',
                            margin: '4px'
                    })
                });


            });

            $(this).children('input[type="radio"]').prop('checked', true).attr('checked','checked');
            //this.style.border = '4px solid #38A';
            $(this).css({
                border: '4px solid #38A',
                margin: '0px'
            });
        }
    });


</script>